= Калькулятор пропускной способности 5G NR
:doctype: book
:stem:
:toc: macro
:toc-title: Содержание
:sectanchors:

include::custom-style/user-guide/user-guide.adoc[]
include::custom-style/admonitions/admonition.adoc[]

[.guide-title]#Руководство по эксплуатации#

toc::[]

[[about]]
== О документе

Руководство описывает онлайн-калькулятор пропускной способности *5G NR Throughput calculator* (далее -- *калькулятор*) и порядок работы с ним.

Калькулятор реализует расчет максимальной теоретической скорости передачи данных (throughput) в сетях link:https://en.wikipedia.org/wiki/5G_NR[5G New Radio] на основе спецификации link:https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3193[3GPP TS 38.306]. Пользователь с помощью калькулятора может вычислить пиковую пропускную способность для заданной конфигурации 5G NR как в downlink (от базовой станции к устройству), так и в uplink (от устройства к сети) -- как для всего радиоканала, так и для отдельного пользовательского оборудования при выделенной части ресурсов сети.

[[audience]]
=== Для кого предназначено руководство

Руководство ориентировано на пользователей, которым нужно быстро понять:

* Какие параметры влияют на скорость 5G NR;
* Что означает каждый переключатель/поле в калькуляторе;
* Как получить результат и интерпретировать его.

Типовые роли пользователей:

* Инженер радиопланирования/оптимизации;
* Инженер RAN/ядра связи, проверяющий конфигурации;
* Технический писатель/аналитик, которому нужно объяснить расчет «на пальцах»;
* Студент/исследователь, изучающий физический уровень 5G NR.

Используя данный калькулятор, инженер может быстро прикинуть максимальную пропускную способность 5G NR-системы для различных комбинаций параметров. Это помогает в планировании сетей 5G, выборе оборудования и проверке соответствия заявленных характеристик реальным теоретическим пределам. Пользуйтесь калькулятором для оценки возможностей вашей сети 5G – правильный выбор параметров и понимание результатов позволит наиболее эффективно эксплуатировать современную инфраструктуру связи.

[[terms]]
=== Термины и сокращения

* *NR* -- New Radio, радиоинтерфейс 5G.
* *UE* -- User Equipment, пользовательское устройство (телефон/модем/роутер).
* *gNB* -- базовая станция 5G.
* *DL / UL* -- Downlink (к устройству) / Uplink (от устройства).
* *FDD / TDD* -- частотное / временное дуплексирование.
* *CA* -- Carrier Aggregation, агрегация несущих (суммирование полос).
* *CC* -- Component Carrier, компонентная несущая (одна «полоса» в CA).
* *MIMO layers* -- число пространственных слоев (потоков данных).
* *MCS* -- Modulation and Coding Scheme (модуляция + кодовый коэффициент).
* *Qm* -- порядок модуляции (бит/символ).
* *Rmax* -- кодовый коэффициент (доля полезной информации).
* *SCS* -- SubCarrier Spacing, шаг поднесущих (15/30/60/120 кГц…).
* *μ (нумерология)* -- индекс, определяющий SCS: stem:[SCS = 15cdot 2^mu] кГц.
* *PRB* -- Physical Resource Block, ресурсный блок (12 поднесущих).
* *OH* -- overhead, доля ресурсов под служебные/управляющие каналы.

[[overview]]
== Обзор и назначение калькулятора

[[overview-desc]]
=== Описание

Калькулятор -- веб-страница, на которой вы задаете параметры 5G NR (режим DL/UL, FDD/TDD, число несущих, модуляцию, MIMO, полосу и др.), а инструмент рассчитывает максимальную пропускную способность (throughput) в Мбит/с.

[NOTE]
Калькулятор оценивает *пиковую теоретическую* скорость при идеальных условиях (без радиопомех, перегрузки соты, ограничений планировщика, ухудшения качества канала и т.д.). В реальной сети фактическая скорость обычно ниже.

Калькулятор доступен по адресу link:https://5g-tools.com/5g-nr-throughput-calculator/[].

[[overview-tech]]
=== Предполагаемая реализация

Калькулятор реализован в виде веб-приложения на HTML/JavaScript:

* Поля формы меняют друг друга динамически (например, при выборе TDD появляется отдельный блок настроек);
* Часть значений вычисляется автоматически (серые поля);
* Расчет происходит мгновенно, без явных «загрузок» -- вычисления идут на стороне браузера.

[[calc-model]]
== Как устроен расчет

[[calc-formula]]
=== Основная формула

Калькулятор использует стандартный подход: скорость передачи данных получается как «сколько бит мы можем передать за один OFDM-символ» умножить на «сколько символов в секунду», затем скорректировать на накладные расходы (overhead) и сложить по всем агрегированным несущим.

Ниже приведен базовый вид формулы, используемый в калькуляторах throughput 5G NR:

[stem]
++++
text{Throughput (Mbps)} = 10^{-6}cdot sum_{j=1}^{J} Big( v_{text{layers}}^{(j)}cdot Q_m^{(j)}cdot f^{(j)}cdot R_{max}cdot frac{N_{text{PRB}}^{(BW(j),mu)} cdot 12}{T_s^mu}cdot (1-OH^{(j)}) Big)
++++

где:

* stem:[J] -- число агрегированных несущих (CC) в Carrier Aggregation.
* stem:[v_{text{layers}}] -- число MIMO-слоев (потоков данных).
* stem:[Q_m] -- порядок модуляции (бит на 1 символ): QPSK=2, 16QAM=4, 64QAM=6, 256QAM=8.
* stem:[f] -- масштабирующий коэффициент (scaling factor) из 3GPP (обычно 1, если считаем «пик»).
* stem:[R_{max}] -- кодовый коэффициент (доля полезных бит). В интерфейсе часто задается как «Target code rate R×[1024]», тогда stem:[R_{max}=frac{R}{1024}].
* stem:[N_{text{PRB}}] -- число ресурсных блоков PRB для выбранной полосы BW и нумерологии μ.
* stem:[12] -- в одном PRB всегда 12 поднесущих.
* stem:[T_s^mu] -- средняя длительность OFDM-символа (зависит от μ).
* stem:[OH] -- доля ресурсов, уходящая на служебные/управляющие каналы (overhead).
* stem:[10^{-6}] -- перевод в Мбит/с (из бит/с).

[[calc-tdd]]
=== Особенность TDD (доля DL/UL во времени)

В режиме *TDD* (Time Division Duplex, временное разделение) не все символы/слоты кадра отданы под передачу данных в одном направлении. Поэтому калькулятор вводит дополнительный коэффициент «доля слотов/символов, выделенных под DL (или UL)».

Обозначим эту долю как stem:[alpha_{text{dir}}] (для DL или UL). Тогда итоговый throughput для TDD считается как:

[stem]
++++
text{Throughput}_{TDD} = text{Throughput}_{base}cdot alpha_{text{dir}}
++++

Для режима *FDD* (Frequency Division Duplex, частотное разделение) можно считать stem:[alpha_{text{dir}}=1], так как направления разделены по частоте.

[[calc-read-result]]
=== Как интерпретировать результат

* Результат -- верхняя оценка («потолок») при заданных параметрах.
* Если вы считаете DL -- это максимум для «скачивания»; UL -- максимум для «отправки».
* Если включена агрегация (stem:[J>1]) -- итоговая скорость равна сумме скоростей по всем CC.

[[ui]]
== Интерфейс калькулятора

На странице результат отображается вверху/снизу, например:

image:images/image-calc-int-1.png[width=50%]

Ниже расположены блоки параметров:

* *Input data* (входные параметры, которые вы задаете)
+
image:images/image-calc-int-2.png[width=70%]

* *Only for TDD* (блок используется в случае, если выбран режим *TDD*.
+
image:images/image-calc-int-3.png[width=70%]

* *Intermediate calculations* (серые поля, которые калькулятор считает сам)
+
image:images/image-calc-int-4.png[width=70%]
+
[NOTE]
--
Серые поля изменять нельзя -- они вычисляются автоматически из выбранных режимов и стандартных таблиц.
--

[[ui-input]]
== Параметры калькулятора

Таблица основных (изменяемых) параметров представлена ниже:

._Таблица основных параметров калькулятора_
[%collapsible]
====
[cols="1a,1a"]
|===
^.^h|Наименование параметра
^.^h|Описание параметра
//Direction of data transfer
.^|Direction of data transfer (направление передачи)
|* *DL (downlink)* -- расчет скорости «сеть → устройство».
* *UL (uplink)* -- расчет скорости «устройство → сеть».

Выбор влияет на:

* Допустимое максимальное число MIMO слоев;
* Типовые значения overhead;
* (в TDD) долю слотов/символов, относящихся к DL или UL.
//Mode (дуплексирование): FDD / TDD
.^|Mode (дуплексирование): FDD / TDD
|* *FDD* -- DL и UL идут одновременно, но в разных частотных полосах.
* *TDD* -- DL и UL чередуются во времени в рамках одной полосы, поэтому нужно учитывать структуру кадра (сколько ресурсов выделено под DL и UL).

_Зависимости_ +
При выборе *TDD* появляются дополнительные параметры в секции *ONLY FOR TDD*.
// J -- number of aggregated component carriers (число агрегированных несущих)
.^|J -- number of aggregated component carriers (число агрегированных несущих)
|Параметр stem:[J] задает количество несущих в агрегации (CA).

* stem:[J=1] -- расчет для одной несущей.
* stem:[J>1] -- суммарная скорость по нескольким несущим.
//v(j)Layers -- maximum number of MIMO layers (число MIMO слоев)
.^|v(j)Layers -- maximum number of MIMO layers (число MIMO слоев)
|Параметр stem:[v_{text{layers}}] -- сколько независимых потоков данных передается одновременно.

Практический смысл:

* 1 слой -- без MIMO (SISO);
* 2 слоя -- условно MIMO 2×2 (если поддерживается);
* 4 слоя -- MIMO 4×4 (часто максимум для UE в DL);
* В UL обычно меньше, чем в DL.
//Use MU-MIMO Beamforming / Massive MIMO capacity Gain
.^|Use MU-MIMO Beamforming / Massive MIMO capacity Gain
|Переключатель относится к режимам, где базовая станция может обслуживать несколько пользователей одновременно (MU-MIMO) и/или использовать beamforming.

* Если вы считаете «скорость для одного UE» -- обычно выбирайте *No*;
* Если оцениваете «емкость соты при MU-MIMO» -- можно включить *Yes* (учитывайте, что это уже не скорость одного пользователя, а оценка суммарной емкости/эффективности).
//Mode of Modulation and Code Rate (MCS / модуляция и кодовый коэффициент)
.^|Mode of Modulation and Code Rate (MCS / модуляция и кодовый коэффициент)
|Эта группа определяет stem:[Q_m] (порядок модуляции) и stem:[R_{max}] (кодовый коэффициент).

Доступны режимы:

* *Auto (3GPP 38.214)* -- вы выбираете индекс MCS, а калькулятор сам подставляет модуляцию и кодовый коэффициент из таблицы.
* *Manual* -- вы задаете значения вручную (подходит для экспертов).

Поля/элементы управления:

* *Enter the MCS index* -- индекс MCS (обычно ползунок). Чем выше индекс, тем выше модуляция и/или кодовый коэффициент → тем выше throughput (при условии, что канал это «тянет»).
* *Select a 5G NR table from 38.214* -- выбор таблицы MCS. В 5G NR есть разные MCS-таблицы, выбор зависит от контекста управления (например, DCI/сигнализации).
* *Q(j)m modulation order* -- фактическое значение stem:[Q_m] (например, 6 для 64QAM).
* *Target code rate R×[1024]* -- целевой кодовый коэффициент в виде целого числа R (например, 948).
* *Rmax* -- вычисляемое значение stem:[R_{max}=frac{R}{1024}] (например, 0.92578125 при R=948).
//f(j) Scaling factor (масштабирующий коэффициент)
.^|f(j) Scaling factor (масштабирующий коэффициент)
|Параметр stem:[f] -- коэффициент, учитывающий ограничения/снижения эффективности из 3GPP.

* Для расчета «пика» чаще всего выбирают *1*.
* Значения 0.8 / 0.75 / 0.4 используют, если нужно учесть снижение максимальной скорости в определенных сценариях (например, высокая мобильность или ограничения комбинаций).
//BW(j) -- Bandwidth, Frequency Range и μ (полоса, диапазон, нумерология)
.^|BW(j) -- Bandwidth, Frequency Range и μ (полоса, диапазон, нумерология)
|Здесь вы выбираете:

* Ширину полосы BW (в МГц);
* Диапазон FR (FR1 или FR2);
* Нумерологию μ (что соответствует шагу поднесущих -- 15/30/60/120 кГц…).

Калькулятор затем автоматически определяет:

* Значение FR (FR1/FR2);
* Шаг поднесущих;
* Максимальное количество PRB (серое поле stem:[N_{text{PRB}}]).

[NOTE]
--
Если доступна опция *other (enter number of PRB)*, то вместо стандартной полосы можно ввести PRB вручную (например, чтобы смоделировать частичное выделение ресурсов).
--
.^|Overhead OH(j) (служебные расходы)
|Опция определяет stem:[OH] -- долю ресурсов, которая не идет на пользовательские данные.

Доступно:

* *Auto (3GPP 38.306)* -- калькулятор подставляет типовые значения OH для DL/UL и FR1/FR2;
* *Manual* -- ручной ввод overhead (если вы точно знаете, что в вашей конфигурации overhead отличается от типового).
2+^.^|Параметры только для TDD (ONLY FOR TDD) -- блок используется в случае, если выбран режим *TDD*.
//Mode of Symbols allocation (распределение символов)
.^|Mode of Symbols allocation (распределение символов)
|Определяет, как калькулятор вычисляет долю stem:[alpha_{text{dir}}] -- какая часть времени кадра выделена под DL (или UL).

Возможные режимы (зависит от реализации калькулятора):

* *Automatic (3GPP)* -- расчет по стандартной таблице.
* *Manual* -- ручное задание распределения.
* *Vendor data Simple / Advanced* -- преднастроенные варианты распределений (типовые профили, которые часто используют производители/операторы).
//Frame structure, DL:UL (структура кадра)
|Frame structure, DL:UL (структура кадра)
|Вы выбираете соотношение DL/UL на уровне «кадровой структуры» (например, сколько слотов DL и сколько UL в периоде).

Это влияет на итоговую долю stem:[alpha_{text{DL}}] и stem:[alpha_{text{UL}}].
//TDD Slot formats configuration (формат слота)
|TDD Slot formats configuration (формат слота)
|Выбор конкретного шаблона слота (последовательность D/U/S или D/U/«special») задает детальное распределение символов внутри слота.
//Use Flexible Symbol for Data (гибкие символы)
|Use Flexible Symbol for Data (гибкие символы)
|Определяет, используются ли «flexible symbols» (гибкие символы) как полезные данные или как защитные/служебные (gap).
|===
====

[[ui-auto]]
=== Автоматически вычисляемые параметры

Эти значения калькулятор рассчитывает сам. Их нельзя редактировать -- достаточно понимать смысл, чтобы проверять, что введенные/полученные вами данные корректны.

._Таблица автоматически вычисляемых параметров_
[%collapsible]
====
[cols="1a,2a,4a",options="header"]
|===
^.^|Параметр (в интерфейсе)
^.^|Обозначение
^.^|Что означает

.^|FR(j) Frequency Range
^.^|stem:[FR]
|Диапазон частот: FR1 (до ~6 ГГц) или FR2 (мм-волны, выше ~24 ГГц). Определяется выбранной полосой/шагом.

.^|μ(j) -- value of carrier configuration
^.^|stem:[mu]
|Нумерология (индекс). Определяет шаг поднесущих: stem:[SCS=15cdot 2^mu] кГц.

.^|NbwPRB(j),μ -- maximum number of PRB
^.^|stem:[N_{text{PRB}}]
|Максимальное число PRB для выбранных BW/FR/μ по стандартным таблицам.

.^|OH(j) -- overhead
^.^|stem:[OH]
|Накладные расходы (доля ресурсов под управление/служебные сигналы).

.^|Tμs(j) -- average OFDM symbol duration
^.^|stem:[T_s^mu]
|Средняя длительность OFDM-символа для выбранного μ (normal CP).

.^|Part of the Slots allocated for DL in TDD mode
^.^|stem:[alpha_{text{DL}}]
|Доля ресурсов TDD, отведенная под DL (аналогично для UL). Используется как множитель к базовой формуле.
|===
====

[[example]]
== Пошаговый пример

Попробуйте повторить расчет, который дает результат *658.726 Mbps*:

. Выберите направление и режим
+
** В *Direction of data transfer* выберите *DL (downlink)*.
** В *Mode* выберите *TDD*.

. Агрегация и MIMO
+
** Установите stem:[J=1] (одна несущая).
** В *v(j)Layers* задайте *4* (stem:[v_{text{layers}}=4]).
** *Use MU-MIMO …* -- выберите *No*.

. Модуляция и кодовый коэффициент (Auto)
+
** В *Mode of Modulation and Code Rate* выберите *Auto (3GPP 38.214)*.
** Установите *MCS index = 28*.
** Выберите таблицу (как на скриншоте) -- например *38.214-Table 5.1.3.1-1*.
** Убедитесь, что калькулятор выставил:
+
*** stem:[Q_m=6] (что соответствует 64QAM),
*** *Target code rate* R = 948,
*** stem:[R_{max}=0.92578125] (то есть stem:[frac{948}{1024}]).

. Scaling factor
+
** В *f(j) Scaling factor* выберите *1* (stem:[f=1]).

. Полоса, FR и μ
+
** В *BW(j) -- bandwidth* выберите вариант:
+
** *BW:50MHz FR1 μ:30kHz*
+
Это соответствует:
+
*** stem:[FR=FR1],
*** stem:[mu=1] (30 кГц),
*** stem:[N_{text{PRB}}=133] (серое поле).

. Overhead
+
** В *Overhead OH(j)…* оставьте *Auto (3GPP 38.306)*.
** Проверьте, что рассчиталось stem:[OH=0.14].

. Настройки TDD (распределение DL/UL)
+
** В секции *ONLY FOR TDD* выберите вариант распределения, чтобы получилось:
+
*** *Part of the Slots allocated for DL…* stem:[alpha_{text{DL}}=0.7714285714285714]

. Проверьте intermediate calculations. Ожидаемые результаты:
+
** stem:[FR=FR1]
** stem:[mu=1] (30 kHz)
** stem:[N_{text{PRB}}=133]
** stem:[OH=0.14]
** stem:[T_s^mu = 0.00003571428571428572] (сек)

. Итоговый результат
+
Вверху страницы должно отобразиться: *Calculated 5G NR Throughput, Mbps: 658.726*

Если хотите проверить «вручную», то можно подставить значения:

[stem]
++++
text{Throughput} =
10^{-6}cdot
4cdot 6cdot 1cdot 0.92578125cdot
frac{133cdot 12}{3.5714285714cdot 10^{-5}}cdot
(1-0.14)cdot
0.7714285714
approx 658.726
++++

[NOTE]
--
При необходимости нажмите «Export to CSV» для
сохранения результатов. Файл CSV будет содержать введенные параметры и рассчитанную пропускную способность, что удобно для отчетов или сравнения разных сценариев. Вы можете повторить расчет с другими значениями (например, изменить stem:[J] или тип модуляции) и сравнить выходные данные – калькулятор быстро пересчитает throughput для каждого нового набора параметров.
--

[[tips]]
== Практические советы

* Начинайте с простого: stem:[J=1], FDD, f=1, Auto-MCS -- так легче понять влияние каждого параметра.
* Для «пиковых» оценок выбирайте максимальную модуляцию и высокий MCS (если это соответствует вашему сценарию).
* В TDD внимательно следите за stem:[alpha_{text{DL}}] -- это один из самых «сильных» множителей.
* Если результат «не сходится с ожиданиями», сначала проверьте:
- DL/UL,
- FDD/TDD,
- FR1/FR2,
- μ (шаг поднесущих),
- PRB (сколько ресурсов реально выбрано),
- overhead.

[[limits]]
== Ограничения расчета

Калькулятор дает верхнюю теоретическую оценку. В реальности скорость может быть ниже из-за:

* Качества радиоканала (SINR), выбора MCS сетью «на лету»;
* Ограничений планировщика и конкуренции пользователей;
* Протокольных накладных расходов выше физического уровня (MAC/RLC/PDCP/IP);
* Особенностей реализации устройств (UE) и базовой станции.
